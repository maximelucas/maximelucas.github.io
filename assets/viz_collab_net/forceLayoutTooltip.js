function dragstarted(t){d3.event.active||simulation.alphaTarget(.3).restart(),t.fx=t.x,t.fy=t.y}function dragged(t){t.fx=d3.event.x,t.fy=d3.event.y}function dragended(t){d3.event.active||simulation.alphaTarget(0),t.fx=null,t.fy=null}let JSONFILENAME="https://maximelucas.github.io/assets/viz_collab_net/collab_net.json";var svg=d3.select("svg"),width=+svg.attr("width"),height=+svg.attr("height"),radius=30,color=d3.scaleOrdinal().range(["silver","#cc0000","green"]),simulation=d3.forceSimulation().force("link",d3.forceLink().id((function(t){return t.id}))).force("charge",d3.forceManyBody().distanceMin(10).distanceMax(500).strength(-70)).force("center",d3.forceCenter(width/2,height/2)),div=d3.select("body").append("div").attr("class","tooltip").style("opacity",0);d3.json(JSONFILENAME,(function(t,e){function n(){r.attr("x1",(function(t){return t.source.x})).attr("y1",(function(t){return t.source.y})).attr("x2",(function(t){return t.target.x})).attr("y2",(function(t){return t.target.y})),i.attr("cx",(function(t){return t.x})).attr("cy",(function(t){return t.y})),i.attr("cx",(function(t){return t.x=Math.max(radius,Math.min(width-radius,t.x))})).attr("cy",(function(t){return t.y=Math.max(radius,Math.min(height-radius,t.y))}))}if(t)throw t;var r=svg.append("g").attr("class","links").selectAll("line").data(e.links).enter().append("line").attr("stroke-width",3),i=svg.append("g").attr("class","nodes").selectAll("circle").data(e.nodes).enter().append("circle").attr("r",7).attr("fill",(function(t){return color(t.group)})).on("mouseover",(function(t){div.transition().duration(100).style("opacity",.9),div.html(t.name).style("left",d3.event.pageX+"px").style("top",d3.event.pageY-28+"px"),d3.select(this).transition().duration(200).attr("r",11),r.style("stroke-width",(function(e){if(t===e.source||t===e.target)return 4})),r.style("stroke",(function(e){if(t===e.source||t===e.target)return"#cc0000"}))})).on("mouseout",(function(t){div.transition().duration(1e3).style("opacity",0),d3.select(this).transition().duration(200).attr("r",7),r.style("stroke-width",(function(e){if(t===e.source||t===e.target)return 3})),r.style("stroke",(function(e){if(t===e.source||t===e.target)return"#999"}))})).call(d3.drag().on("start",dragstarted).on("drag",dragged).on("end",dragended));simulation.nodes(e.nodes).on("tick",n),simulation.force("link").links(e.links)}));